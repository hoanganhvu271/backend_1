<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #welcome_form_email {
            display: none !important;
        }
    </style>
</head>

<body>
    <!-- <div class="se-widget" data-widget="e7SCJfToQ3"></div> -->
    <div class="se-widget" data-id="example-widget" data-widget="HRjDxOYBpF" data-theme="dark"></div>
    <pre id="result" style="height: 100px;">Submit submission to see the result</pre>

</body>

<script>
    
    (function (d, s, id) {
        SE_BASE = "widgets.sphere-engine.com";
        SE_HTTPS = true;
        SE = window.SE || (window.SE = []);
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = (SE_HTTPS ? "https" : "http") + "://" + SE_BASE + "/static/sdk/sdk.min.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, "script", "sphere-engine-jssdk"));
    
    SE.ready = function (f) {
        if (document.readyState != "loading" && document.readyState != "interactive") f();
        else window.addEventListener("load", f);
    };
    SE.ready(function() {

        var afterSendSubmission = function(data) {
            var resultElement = document.getElementById('result');
            // resultElement.innerHTML = '';
            // resultElement.innerHTML += "> submission.id: " + data.submission.id + "<br>";
            // resultElement.innerHTML += "> user.id: " + data.user.id + "<br>";
            // resultElement.innerHTML += "> user.name: " + data.user.name + "<br>";
            // resultElement.innerHTML += "> submission.apiId: " + data.submission.apiId + "<br><br>";
            let databody = JSON.stringify({ submissionid: data.submission.apiId });

            fetch("/api/khocvl", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: databody
            })
        };

        var SEWidget = SE.widget("example-widget");
        SEWidget.events.subscribe('afterSendSubmission', afterSendSubmission);
    });
</script>

</html>

